function h(b,f){return b.filter(function(b){return b.d===f})}function i(b,f,g){switch(g){case "inclusive":return b.filter(function(b){if(b.b&&0<b.b.length&&f.some(function(e){return-1<$.l(e,b.b)?!0:!1}))return b});case "exclusive":return b.filter(function(b){if(0<b.b.length&&f.every(function(e){return-1<$.l(e,b.b)?!0:!1}))return b})}}function k(b){return b.sort(function(b,g){var j=b.name.toLowerCase(),e=g.name.toLowerCase();return j<e?-1:j>e?1:0})}
function l(){return assignments.f.filter(function(b){return!0===b.n})}
(function(b){b.B.C=function(f){var g=b.extend(void 0,f);return this.i(function(){function f(c,b){if(c.d||c.b){if(c.d&&c.b){console.log("both detected!");var a=h(b,c.d),a=i(a,[c.b],c.o)}c.d&&!c.b&&(console.log("JUST category detected"),a=h(b,c.d));!c.d&&c.b&&(console.log("JUST tags detected"),a=i(b,[c.b],c.o));a=k(a);e(a,c.r)}else e(b,c.r)}function e(c,d){b.i(c,function(){var a=b(d).z();a.find('[data-scurl="assignment"]').a("href","cellcast://"+this.e+"/"+this.id+"/true");a.find('[data-scurl="announcement"]').a("href",
"cellcast://announcement/"+this.id);a.find('[data-scurl="notification"]').a("href","cellcast://notification/"+this.id);a.find('[data-scurl="library"]').a("href","cellcast://action/assign/"+this.G+"/"+this.id+"/true");a.find('[data-tmpl="action"]')&&(this.status?(a.find('[data-tmpl="action"]').a("href","cellcast://"+this.e+"/"+this.id+"/true"),a.find('[data-tmpl="actionTitle"]').c("view")):(a.find('[data-tmpl="action"]').a("onclick","selectionLaunch("+this.id+")"),a.find('[data-tmpl="actionTitle"]').c("assign")));
a.find('[data-tmpl="title"]').c(this.name);a.find('[data-tmpl="description"]').c(this.description);a.find('[data-tmpl="status"]').c(this.status);a.find('[data-tmpl="duration"]').c(this.duration);this.m&&a.find('[data-tmpl="metatags"]').c(this.m.join(" "));null!=this.k?a.find('[data-tmpl="thumb"]').a("src",imgpath+"/"+this.k):("nugget"==this.e&&("video"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/video_icon.png"),"audio"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/audio_icon.png"),
"powerpoint"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/ppt_icon.png"),"cellcast"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/default.png"),"html"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/html_icon.png"),"pdf"==this.type&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/PDF_icon.png")),"testset"==this.e&&a.find('[data-tmpl="thumb"]').a("src","img/thumbnails/quiz_icon.png"),"course"==this.e&&a.find('[data-tmpl="thumb"]').a("src",
"img/thumbnails/html_icon.png"),a.find('[data-tmpl="thumb"]').a("src","img/content_images/default.png"));this.type&&("video"==this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/video_icon.png"),"audio"==this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/audio_icon.png"),"powerpoint"==this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/ppt_icon.png"),"cellcast"==this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/default.png"),"html"==
this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/html_icon.png"),"pdf"==this.type&&a.find('[data-tmpl="type_icon"]').a("src","img/thumbnails/PDF_icon.png"));a.find('[data-tmpl="msg_title"]').c(this.title);this.t&&(!0==this.t?a.find('[data-tmpl="msg_status"]').a("src","img/icons/message_read.png"):a.find('[data-tmpl="msg_status"]').a("src","img/icons/message_unread.png"));1==this.status&&a.find('[data-tmpl="status-completion"]').a("src","img/stdicons/complete_true.png");2==this.status&&
a.find('[data-tmpl="status-completion"]').a("src","img/stdicons/complete_true.png");3==this.status&&a.find('[data-tmpl="status-completion"]').a("src","img/stdicons/complete_ip.png");4==this.status&&a.find('[data-tmpl="status-completion"]').a("src","img/stdicons/complete_ip.png");6==this.status&&a.find('[data-tmpl="status-completion"]').a("src","img/stdicons/complete_false.png");a.find('[data-tmpl="status-test"]')&&(this.s?0<this.s.length?(a.find('[data-tmpl="status-test"]').a("src","img/stdicons/test.png"),
1==this.status&&a.find('[data-tmpl="status-test"]').a("src","img/stdicons/test_true.png"),3==this.status&&a.find('[data-tmpl="status-test"]').a("src","img/stdicons/test_false.png")):a.find('[data-tmpl="status-test"]').parent().remove():a.find('[data-tmpl="status-test"]').parent().remove());a.children().v(m)})}var m=b(this);(function(c){if(c.j)switch(c.j){case "library":var d=library.g;break;case "catalog":d=library.g.concat(assignments.f);break;case "assignments":d=c.h?assignments[c.h]:assignments.f;
break;case "announcements":d=messages.u;break;case "notifications":d=messages.D;break;case "status":if(c.h)switch(c.h){case "nuggets":d=mystatus.F;break;case "courses":d=mystatus.A;break;case "assessments":d=mystatus.w;break;case "skillprofiles":d=mystatus.q}else d=mystatus.g}if(c.p){var a=itemById(assignments.q,c.p).g,d=[];b.i(a,function(){var a=itemById(assignments.f,this.id);d.push(a)})}!0==c.n&&(d=l());f(c,d)})(g)})}})(jQuery);